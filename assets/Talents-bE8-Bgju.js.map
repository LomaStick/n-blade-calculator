{"version":3,"file":"Talents-bE8-Bgju.js","sources":["../../src/store/hooks/index.ts","../../src/utils/assetsProxy.ts","../../src/data/TalentsData.ts","../../src/components/UI/Tooltip/Tooltip.tsx","../../src/components/Calculator/Talents/Talents.tsx","../../src/hooks/useScaleFactor.ts"],"sourcesContent":["import { useDispatch, useSelector } from 'react-redux';\r\nimport type { TypedUseSelectorHook } from 'react-redux';\r\nimport { AppDispatch} from '../../store/';\r\nimport { RootState } from '../../store/rootReducer';\r\n\r\nexport const useAppDispatch: () => AppDispatch = useDispatch;\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;","import { IAssets } from \"../types/assets\";\r\n\r\nconst BASE_ASSETS_PATH = '/n-blade-calculator/src/assets/';\r\n\r\n// type TerminalProperties<T> = {\r\n//   [K in keyof T]: T[K] extends string \r\n//     ? [K, T[K]]  // Если значение - строка, сохраняем пару\r\n//     : T[K] extends object\r\n//       ? TerminalProperties<T[K]> // Рекурсия для вложенных объектов\r\n//       : never;\r\n// }[keyof T];\r\n\r\nconst createAssetsProxy = <T extends object>(basePath: string = ''): T => {\r\n  return new Proxy({} as T, {\r\n    get(_, prop: string) {\r\n      if (typeof prop !== 'string') return '';\r\n\r\n      const currentPath = basePath ? `${basePath}/${prop}` : prop;\r\n\r\n      \r\n      // Для свойств с подчеркиванием возвращаем полный путь\r\n      if (prop.startsWith('_')) {\r\n        const fileName = prop.slice(1);\r\n        return `${BASE_ASSETS_PATH}${basePath}/${fileName}.png`;\r\n      }\r\n      \r\n      // Для остальных случаев создаем новый Proxy\r\n      return createAssetsProxy(currentPath);\r\n    }\r\n  });\r\n};\r\n\r\nexport const assets = createAssetsProxy<IAssets>();","import { ITalentsData } from \"../types/talents\";\r\n\r\nexport const TalentsData: ITalentsData = {\r\n  warrior: {\r\n    b1: { \r\n      name: 'Стойкость',\r\n      description: 'Увеличивает запас здоровья 1%, сопротивление критическому урону на 0.75% и шанс блока 0.5%.',\r\n      skills: {\r\n        s1: {\r\n          name: 'Сомкнуть Ряды',\r\n          description: 'Увеличивает радиус действия ауры «Сомкнуть ряды» на 5 метров и добавляет к ауре прибавку к сопротивлению критическому урону на 800.',\r\n        },\r\n        s2: {\r\n          name: 'Защитная Стойка',\r\n          description: 'Умение дополнительно повышает маг/физ броню на 10%, парирование, уклонение, сопротивление магии, блок на 5%, сопротивление критическому урону на 7.5%, а количество зарядов на 2.',\r\n        },\r\n        s3: {\r\n          name: 'Метнуть Оружие',\r\n          description: 'Попадание увеличивает желание монстров атаковать именно воина и обездвиживает противника на 2 секунды.',\r\n        },\r\n        s4: {\r\n          name: 'Второе Дыхание',\r\n          description: 'Увеличивает максимальный запас здоровья на 30%, сопротивление критическому урону на 5000, а также исцеляет воина на 30% от максимального запаса здоровья. Умение можно применять, находясь под воздействием безмолвия.',\r\n        }\r\n      }\r\n    },\r\n    b2: {\r\n      name: 'Проворство',\r\n      description: 'Увеличивает точность 0.5%, уклонения и скорость атаки 1%.',\r\n      skills: {\r\n        s1: {\r\n          name: 'Сокрушительный Удар',\r\n          description: 'Длительность оглушения увеличена на 1 сек.',\r\n        },\r\n        s2: {\r\n          name: 'Рывок',\r\n          description: 'Получает невосприимчивость к обездвиживанию на время действия способности, а также ускорение увеличивается дополнительно на 10%.',\r\n        },\r\n        s3: {\r\n          name: 'Вертушка',\r\n          description: 'Воин начинает вращаться, нанося урон всем рядом стоящим противникам. При применении этого умения воин снимает с себя 2 негативных эффекта.',\r\n        },\r\n        s4: {\r\n          name: 'Превосходство',\r\n          description: 'При применении воин на некоторое время снижает у всех противников поблизости скорость передвижения на 20% и скорость атаки на 1750. За каждого поражённого умением противника скорость передвижения увеличивается на 10%, а скорость атаки на 575 - максимум 5 зарядов усиления, также за каждую поражённую цель воин исцеляется, а его успешные атаки под действием Превосходства исцеляют его, но не чаще 1 раза в 0.5 сек, отраженные атаки (срабатывание у врага парирования, блока, сопротивление магии, уклонения), исцеляют воина лишь с шансом 25%.',\r\n        }\r\n      }\r\n    },\r\n    b3: {\r\n      name: 'Ярость',\r\n      description: 'Увеличен шанс критического урона 0.75%, сила атаки на 0.5% и сопротивление магии на 1%.',\r\n      skills: {\r\n        s1: {\r\n          name: 'Берсерк',\r\n          description: 'Затраты маны на умение снижаются на 10%, а перезарядка на 5 сек.',\r\n        },\r\n        s2: {\r\n          name: 'Сотрясти Землю',\r\n          description: 'Увеличивает радиус действия на 2.5м вокруг каждой поражённой цели, урон умения на 10% и эффект замедления на 15%.',\r\n        },\r\n        s3: {\r\n          name: 'Боевой клич',\r\n          description: 'На 15 сек. снижает силу атаки всех противников и увеличивает силу атаки союзников вокруг в радиусе 10 метров вокруг воина. Негативный и положительный эффекты умения также распространяются на все цели в радиусе 8 метров от поражённых целей. Умение накладывает на противников эффект безмолвия на 3.5 cек., и снимает с воина негативные эффекты в количеству равному поражённым негативным эффектом целям.',\r\n        },\r\n        s4: {\r\n          name: 'Адреналин',\r\n          description: 'Получает периодическое исцеление, а атаки противников восстанавливают ему здоровье. При срабатывании восстановления здоровья от атак противников, воин наносит урон вокруг себя в радиусе 7.5-м и замедляет поражённые цели на 25% на 2 сек. Под действием умения воин получает 30% сопротивления замедлению. Длительность эффекта 12 сек.',\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  thief: {\r\n    b1: {\r\n      name: 'Приемы',\r\n      description: 'Повышает точность персонажа на 0.5%, сопротивляемость магии на 0.75% и сопротивлени критическому урону на 0.75% за каждый вложенный талант.',\r\n      skills: {\r\n        s1: {\r\n          name: 'Град Ударов',\r\n          description: 'Количество ударов в серии увеличивается до трех.',\r\n        },\r\n        s2: {\r\n          name: 'Спутать Карты',\r\n          description: 'Скорость разбойника повышается на 10-30% (в зависимости от количества противников поблизости при применении) на время действия способности. Перезарядка снижается на 4 секунды.',\r\n        },\r\n        s3: {\r\n          name: 'Быстрые Ноги',\r\n          description: 'В течение 10 сек. разбойник двигается на 40% быстрее, а его уклонение увеличивается на 12%.',\r\n        },\r\n        s4: {\r\n          name: 'Поднять Ставки',\r\n          description: 'При применении повышается показатель критического урона на 45%, появляется 45% шанс применить умения без затрат маны и 15% шанс проигнорировать защиту целей (уклонение, парирование, блок, сопротивление) - длительность эффекта 12 сек, дополнительно при использовании умения Разбойник без затрат маны и ухода на перезарядку использует умение Быстрые Ноги. Использование умения сбрасывает перезарядку всех умений ветки (Быстрые ноги, Спутать карты, Град ударов).',\r\n        }\r\n      }\r\n    },\r\n    b2: {\r\n      name: 'Уловки',\r\n      description: 'Повышает запас энергии персонажа на 0.75%, уклонение на 1% и показатель критического урона на 0.5% за каждый вложенный талант.',\r\n      skills: {\r\n        s1: {\r\n          name: 'Шипы',\r\n          description: 'Длительность замедления увеличивается на 3 секунды.',\r\n        },\r\n        s2: {\r\n          name: 'Иссушающая Атака',\r\n          description: 'Понижает силу атаки противника дополнительно на 7.5%.',\r\n        },\r\n        s3: {\r\n          name: 'Дымовая Шашка',\r\n          description: 'Едкий дым наносит урон и в течение 3.5 секунд не дает применять способности, а также замедляет всех противников, попавших в зону поражения, на 15%. Умение имеет 50% шанс проигнорировать защиту.',\r\n        },\r\n        s4: {\r\n          name: 'Удавка',\r\n          description: 'Разбойник атакует всех противников в конусе перед собой, атака наносит цели мгновенный урон и прерывает применение умений, а также в течение 10 сек. противник будет получать периодический урон и терять ману, восстанавливая её разбойнику. Умение игнорирует защиту цели, а также накладывает на разбойника эффект Стремительная Расправа - скорость передвижения увеличивается на 40% на 10 сек.',\r\n        }\r\n      }\r\n    },\r\n    b3: {\r\n      name: 'Удары',\r\n      description: 'Повышает силу атаки разбойника на 0.75%, парирование на 0.5% и шанс критического удара на 0.5% за каждый вложенный талант.',\r\n      skills: {\r\n        s1: {\r\n          name: 'Подстроенный Удар',\r\n          description: 'Сопротивление крит урону цели дополнительно понижается на 1400.',\r\n        },\r\n        s2: {\r\n          name: 'Коварный Порез',\r\n          description: 'Перезарядка снижается на 5 секунд, шанс срабатывания негативного эффекта повышается до 100%. Способность начинает игнорировать парирование цели.',\r\n        },\r\n        s3: {\r\n          name: 'Парализующий Яд',\r\n          description: 'Разбойник смазывает свое оружие ядом на 25 сек, который при атаках может на некоторое время вызывать у жертвы мышечный паралич, оглушая её на 1.25 сек. Паралич срабатывает не чаще 1 раза в 4 сек. Можно использовать в комбинации со Смертельным Ядом.',\r\n        },\r\n        s4: {\r\n          name: 'Зияющая Рана',\r\n          description: 'Разбойник оставляет на теле всех врагов в конусе перед собой кровоточащие порезы на 10 сек, которые наносят большой периодический урон. Дальность поражения умения 6 метров. Умение с шансом 50% игнорирует парирование цели. Если цель парировала умение, разбойник восстановит 100% от затраченной на умение маны.',\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  archer: {\r\n    b1: {\r\n      name: 'Охотник',\r\n      description: 'Увеличивает здоровье лучника на 0.75%, скорость атаки 0.5%, сопротивление критическому урону 0.75% за каждое вложенное очко.',\r\n      skills: {\r\n        s1: {\r\n          name: 'Тактическое Отступление',\r\n          description: 'Применение усиленной способности снимает с лучника 3 негативных эффекта.',\r\n        },\r\n        s2: {\r\n          name: 'Сковывающий Выстрел',\r\n          description: 'Усиленная талантом способность оглушает цель.',\r\n        },\r\n        s3: {\r\n          name: 'Ослепляющая Стрела',\r\n          description: 'Стрела взрывается яркой вспышкой света, нанося цели небольшой магический урон и снижая её показатель точности на 90% на 4 сек. Умение игнорирует уклонение цели.',\r\n        },\r\n        s4: {\r\n          name: 'Жажда Крови',\r\n          description: 'Лучник стреляет во всех противников перед собой заколдованными стрелами, которые при попадании наносят им урон и восстанавливают здоровье лучнику в размере 50% от нанесённого урона - умение игнорирует уклонение цели. Также лучнику становится доступно аналогичное умение по одиночной цели, которое восстанавливает здоровье в размере 17.5% от максимального запаса (35% при критическом срабатывании), а также похищает у цели 22.5% базового сопротивления критическому урону (не учитываются прибавки от гильдейских усилений, эликсиров и так далее) на 12 сек. Умения имеют общую перезарядку.',\r\n        }\r\n      }\r\n    },\r\n    b2: {\r\n      name: 'Стрелок',\r\n      description: 'Увеличивает силу атаки, точность и регенерацию энергии лучника на 0.5% за каждое вложенное очко таланта.',\r\n      skills: {\r\n        s1: {\r\n          name: 'Выстрел на Вскидку',\r\n          description: 'Лишает возможности применять умения в течении 1.5 секунды, но перезарядка умения увеличивается на 5 сек.',\r\n        },\r\n        s2: {\r\n          name: 'Веерная Стрельба',\r\n          description: 'Усиленная талантом способность с 20% шансом не потратит энергии.',\r\n        },\r\n        s3: {\r\n          name: 'Дождь из Стрел',\r\n          description: 'Лучник выпускает в небо огромное количество стрел которые спустя 3 секунды обрушиваются на его противников в указанной области. Каждое попадание наносит урон и замедляет цели на 30% на 3 сек.',\r\n        },\r\n        s4: {\r\n          name: 'Расплавляющие Стрелы',\r\n          description: 'Под действием этой способности в течение 14 сек. атаки лучника снижают физическую броню цели на 7%, а также наносят периодический урон - негативный эффект суммируется до 5 раз и длится 10 сек.',\r\n        }\r\n      }\r\n    },\r\n    b3: {\r\n      name: 'Снайпер',\r\n      description: 'Увеличивает точность лучника на 0.75%, запас энергии и уклонение на 0.5% за каждое вложенное очко таланта.',\r\n      skills: {\r\n        s1: {\r\n          name: 'Ловушка',\r\n          description: 'Талант увеличивает радиус поражения на 1 метр, сокращает перезарядку на 5 секунд и уменьшает стоимость в мане на 15%.',\r\n        },\r\n        s2: {\r\n          name: 'Аура Точности',\r\n          description: 'Помимо точности аура начинает увеличивать ещё и шанс критического урона на аналогичное точности значение.',\r\n        },\r\n        s3: {\r\n          name: 'Взрывная Стрела',\r\n          description: 'Лучник выпускает в цель стрелу со взрывчаткой которая взрывается через 4 секунды после попадания и наносит урон всем противникам в радиусе 4-м. Взрыв игнорирует сопротивление магии целей.',\r\n        },\r\n        s4: {\r\n          name: 'Уязвимые места',\r\n          description: 'Успешные атаки будут наносить дополнительный урон и замедлять цель на 20% на 3 сек, также под действием эффекта умения повышается шанс лучника проигнорировать защиты цели (уклонение, сопротивление магии, блок) на 12.5%.',\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  priest: {\r\n    b1: {\r\n      name: 'Опека',\r\n      description: 'Жрец в своем служении опирается на покровительство богов и дарит это покровительство своим соратникам. Увеличивает запас здоровья на 0.75%, маны на 0.75% и сопротивление критическому урону на 0.75%. Позволяет вложить максимум 24 очка таланта.',\r\n      skills: {\r\n        s1: {\r\n          name: 'Щит богов',\r\n          description: 'Превращает заклинание \"божественный щит в ауру, действующую и на других игроков',\r\n        },\r\n        s2: {\r\n          name: 'Молитва',\r\n          description: 'Получает возможность увеличить силу атаки жреца и его союзников на 12-80 (в зависимости от уровня жреца) за каждого противника в радиусе 7.5м от жреца. Максимум 15 зарядов дополнительного усиления',\r\n        },\r\n        s3: {\r\n          name: 'Кольцо веры',\r\n          description: 'Жрец получает заклинание \"Кольцо Веры\". Жрец освящает землю в указанной точке. В течение 4-5 секунд (в зависимости от уровня жреца) все дружественные персонажи, попавшие под действие заклинания, игнорируют вражеские атаки. Умение срабатывает на одну и ту же цель не чаще 1 раза в 20 секунд.',\r\n        },\r\n        s4: {\r\n          name: 'Перевоплощение',\r\n          description: 'Жрец получает заклинание \"Перевоплощение\", которое увеличивает показатели физ/маг брони на 6000-28000, силы атаки на 1000-4500 и здоровья на 3000-15000 на 20 секунд. В этом состоянии атаки жреца провоцируют монстров атаковать его.',\r\n        }\r\n      }\r\n    },\r\n    b2: {\r\n      name: 'Отмщение',\r\n      description: 'Исполенный праведного гнева жрец имеет увеличенный запас энергии 0.5%, силы атаки на 0.75% и шанса критического урона на 0.75% за одно вложенное очко таланта. Позволяет вложить максимум 24 очка таланта.',\r\n      skills: {\r\n        s1: {\r\n          name: 'Правосудие',\r\n          description: 'Заклинание \"Правосудие\" получает способность давать жрецу и его спутникам невосприимчивость к эффектам обездвиживания на 5 сек',\r\n        },\r\n        s2: {\r\n          name: 'Кара',\r\n          description: 'Заклинание \"Кара\" получает способность оглушать противников на 2.5 сек., а так же снижать их магическую броню на 33% на это же время.',\r\n        },\r\n        s3: {\r\n          name: 'Благословение',\r\n          description: 'Аура \"Благословение\" даёт жрецу и его союзникам в радиусе 25м положительный эффект, под действием которого, успешные атаки на 7 сек. увеличивает скорость перемещения на 3-5% и скорость атаки на 50-360 единиц за каждый заряд эффекта. Эффект суммируется до 5 раз.',\r\n        },\r\n        s4: {\r\n          name: 'Возмездие',\r\n          description: 'Жрец обездвиживает цель на 4 сек, а так же на 10-16 сек. получает положительный эффект, увеличивающий атакующие характеристики на 10% и позволяющий его атакам обездвиживать цель на 1.5сек.(обездвиживание от атак срабатывает не чаще одного раза в 3.5 сек.) Дальность действия 25м. Игнорирует защиту цели (сопротивление магии). Умение наносит урон только в PVE.',\r\n        }\r\n      }\r\n    },\r\n    b3: {\r\n      name: 'Вера',\r\n      description: 'Укрепленный в вере жрец получает повышение показателя блока на 0.5%, сопротивление магии на 1% и сопротивление критическому урону на 0.5% за каждое вложенное очко талантов. Позволяет вложить максимум 24 очка таланта.',\r\n      skills: {\r\n        s1: {\r\n          name: 'Божественное Сияние',\r\n          description: 'Заклинание Божественное Сияние исцеляет дополнительно на 20% от нанесенного им урона, а так же частота срабатывания увеличивается на 20%',\r\n        },\r\n        s2: {\r\n          name: 'Небесный Свет',\r\n          description: 'Небесный свет получает способность усиливать дружественным игрокам магическую броню на 750-10000 (в зависимости от уровня) и рассеивать с них еще 1 негативный эффект.',\r\n        },\r\n        s3: {\r\n          name: 'Восстановление',\r\n          description: 'Жрец получает ауру \"Восстановление\". Аура повышает скорость регенерации энергии у жреца и дружественных персонажей на 195-1440 в зависимости от уровня жреца, а так же повышает максимальный запас здоровья на 7%',\r\n        },\r\n        s4: {\r\n          name: 'Воскрешение',\r\n          description: 'Жрец воскрешает своего саратника, находящегося на расстоянии не более 7.5м. Длительность применения 3.3сек. Один и тот же персонаж может быть воскрешён не чаще 1 раза в 80 сек.',\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  mage: {\r\n    b1: {\r\n      name: 'Лед',\r\n      description: 'Повышает физическую броню на 1.25%, сопротивление критическому урону на 0.75%, а так же точность на 0.5% за каждый вложенный талант.',\r\n      skills: {\r\n        s1: {\r\n          name: 'Морозные Доспехи',\r\n          description: 'Замедление усиливается дополнительно на 10%, а его длительность увеличивается на 1 сек.',\r\n        },\r\n        s2: {\r\n          name: 'Ледяная Тюрьма',\r\n          description: 'Маг получает возможность использовать заклинание Ледяная Тюрьма на себя (после окончания заморозки на маге не будет эффекта замедления, длительность заморозки - 4 секунды).'\r\n        },\r\n        s3: {\r\n          name: 'Ледяные Осколки',\r\n          description: 'Волна поражает противников в радиусе 7.5 метров, при попадании противники замедляются на 4%, а маг ускоряется на 4% на 8 сек. Оба эффекта складываются до 6 раз. Умение имеет 30% шанс проигнорировать уклонение цели.',\r\n        },\r\n        s4: {\r\n          name: 'Полярный Холод',\r\n          description: 'На 4 секунды маг замедляет всех окружающих противников, после окончания замедления противники получают урон и оглушаются на 4 секунды.',\r\n        }\r\n      }\r\n    },\r\n    b2: {\r\n      name: 'Пламя',\r\n      description: 'Увеличивает силу атаки на 0.75%, повышает шанс критического урона на 0.75% и запас его здоровья на 0.5% за каждый вложенный талант.',\r\n      skills: {\r\n        s1: {\r\n          name: 'Воспламенение',\r\n          description: 'Умение получает способность поджигать противников в радиусе 3 метров от цели.',\r\n        },\r\n        s2: {\r\n          name: 'Огненный Шар',\r\n          description: 'Заклинание «Огненный Шар» получает способность на 7 сек. поджигать противников, а его зона поражения увеличена на 2 метра.',\r\n        },\r\n        s3: {\r\n          name: 'Испепеление',\r\n          description: 'Волшебник копит внутренний огонь и выпускает его в выбранную цель, нанося урон ей и окружающим её противникам в радиусе 4 метров. Пораженные умением враги теряют 33% магической брони на 10 сек. Умение игнорирует сопротивление магии целей.',\r\n        },\r\n        s4: {\r\n          name: 'Пылающий Метеорит',\r\n          description: 'Маг призывает с небес раскаленную каменную глыбу, которая приземляется спустя 3 сек. и при ударе о землю наносит огромный урон всем врагам в радиусе 5 метров, оглушает их на 4 секунды. При падении метеорит также замедляет все цели в радиусе 10 метров на 33% на 4 сек, эффект замедления игнорирует сопротивление магии цели.',\r\n        }\r\n      }\r\n    },\r\n    b3: {\r\n      name: 'Энергия',\r\n      description: 'Увеличивает критический урон на 0.75%, запас маны на 0.5% и уклонение на 0.75% за каждый вложенный талант.',\r\n      skills: {\r\n        s1: {\r\n          name: 'Удар Молнии',\r\n          description: 'Заклинание «Удар Молнии» оглушает цель вместо обездвиживания.',\r\n        },\r\n        s2: {\r\n          name: 'Энергетическая Волна',\r\n          description: 'Увеличивает количество энергии, сжигаемой заклинанием «Энергетическая волна» на 20%. Заклинание получает способность снижать сопротивление магии противников на 20% на 8 сек.',\r\n        },\r\n        s3: {\r\n          name: 'Магическая Ловушка',\r\n          description: 'Маг получает заклинание «Магическая ловушка». Маг ставит на землю ловушку, которая взрывается при попадании в неё противников, лишая возможности применять способности на 4 секунды.',\r\n        },\r\n        s4: {\r\n          name: 'Запредельный разряд',\r\n          description: 'Маг выпускает мощный разряд, поражающий цель и противников в радиусе 6 метров вокруг неё. Обездвиживает противников и не имеют возможности использовать умения в течении 4 сек, а также их сила атаки снижена на 50% на 7 сек.',\r\n        }\r\n      }\r\n    }\r\n  }\r\n};","import React, { useState, useRef, ReactElement, cloneElement, useCallback } from 'react';\r\nimport './Tooltip.scss';\r\n\r\ntype TooltipPosition = string;\r\n\r\ninterface TooltipProps {\r\n  content: React.ReactNode;\r\n  children: ReactElement;\r\n  position?: TooltipPosition;\r\n}\r\n\r\n/** Компонент Tooltip отображает всплывающую подсказку при наведении на дочерний элемент.\r\n * @param {React.ReactNode} content - Контент подсказки.\r\n * @param {ReactElement} children - Дочерний элемент, к которому привязана подсказка.\r\n * @param {TooltipPosition} [position='defaurt'] - Позиция подсказки относительно элемента.\r\n */\r\nconst Tooltip: React.FC<TooltipProps> = ({\r\n  content,\r\n  children,\r\n  position = 'default',\r\n}) => {\r\n  const [visible, setVisible] = useState(false);\r\n  const childRef = useRef<HTMLElement>(null);\r\n  const tooltipRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Оптимизация: мемоизация обработчиков для предотвращения лишних ререндеров\r\n  const showTooltip = useCallback(() => setVisible(true), []);\r\n  const hideTooltip = useCallback(() => setVisible(false), []);\r\n\r\n  // Клонируем дочерний элемент с добавлением обработчиков событий\r\n  const childWithProps = cloneElement(children, {\r\n    ref: childRef,\r\n    onMouseEnter: showTooltip,\r\n    onMouseLeave: hideTooltip,\r\n    onTouchStart: showTooltip,\r\n    onTouchEnd: hideTooltip,\r\n  } as React.HTMLAttributes<HTMLElement>);\r\n\r\n  return (\r\n    <div className=\"tooltip-container\">\r\n      {childWithProps}\r\n      \r\n      {visible && (\r\n        <div \r\n          ref={tooltipRef}\r\n          className={`tooltip tooltip_${position}`}\r\n          id=\"tooltip-content\"\r\n          role=\"tooltip\"\r\n        >\r\n          {content}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(Tooltip);","import { memo, RefObject, useCallback, useMemo, useRef } from \"react\";\r\nimport { useAppDispatch, useAppSelector } from \"@store/hooks\";\r\nimport { incrementBranchLevel, incrementSkillLevel, resetBranch, resetTalents, selectCurrentClass } from \"@store/slices\";\r\nimport { useScaleFactor } from \"@hooks/useScaleFactor\";\r\nimport { TALENTS_BRANCH_MAX_POINTS, TALENTS_MAX_POINTS } from \"@utils/consts\";\r\nimport { assets } from \"@utils/assetsProxy\";\r\nimport { TalentsData } from \"@data/TalentsData\";\r\nimport { BranchId, ISkillsData, SkillId, SkillStatus } from '../../../types/talents';\r\nimport { Tooltip } from \"@components/UI/Tooltip/\";\r\nimport './Talents.scss';\r\nimport { shallowEqual } from \"react-redux\";\r\n\r\nconst TalentsTab = memo(() => {\r\n  const dispatch = useAppDispatch();\r\n  const currentClass = useAppSelector(selectCurrentClass);\r\n  const { branchesState, availablePoints } = useAppSelector(state => ({\r\n    branchesState: state.talents[currentClass].talents.branches,\r\n    availablePoints: state.talents[currentClass].talents.availablePoints\r\n  }), shallowEqual );\r\n\r\n  const imageRef = useRef<HTMLImageElement>(null);\r\n  const { updateScale } = useScaleFactor({\r\n    baseWidth: 329,\r\n    targetRef: imageRef as RefObject<HTMLImageElement>,\r\n    cssVarName: '--branch-scale'\r\n  });\r\n\r\n  // Вспомогательные функции\r\n  const hasSpentTalentsPoint = useMemo(() => (\r\n    availablePoints !== TALENTS_MAX_POINTS\r\n  ), [availablePoints]);\r\n\r\n  const canUpgradeBranch = useMemo(() => (branchId: BranchId) => (\r\n    availablePoints > 0 && \r\n    branchesState[branchId]?.level < TALENTS_BRANCH_MAX_POINTS\r\n  ), [availablePoints, branchesState]);\r\n\r\n  const calculateBranchPoints = useCallback((branchId: BranchId): number => {\r\n    const branch = branchesState[branchId];\r\n    return branch ? branch.level + Object.values(branch.skills).reduce((sum, skill) => sum + (skill.level || 0), 0) : 0;\r\n  }, [branchesState]);\r\n\r\n  // Обработчики событий\r\n  const handleResetAll = useCallback(() => {\r\n    dispatch(resetTalents(currentClass));\r\n  }, [currentClass, dispatch]);\r\n\r\n  const handleBranchLevelUp = useCallback((branchId: BranchId) => {\r\n    if (canUpgradeBranch(branchId)) {\r\n      dispatch(incrementBranchLevel({ currentClass, branchId }));\r\n    }\r\n  }, [canUpgradeBranch, currentClass, dispatch]);\r\n\r\n  const handleSkillLevelUp = useCallback((branchId: BranchId, skillId: SkillId) => {\r\n    if (availablePoints > 0) {\r\n      dispatch(incrementSkillLevel({ currentClass, branchId, skillId }));\r\n    }\r\n  }, [availablePoints, currentClass, dispatch]);\r\n\r\n  const handleBranchReset = useCallback((branchId: BranchId) => {\r\n    dispatch(resetBranch({ currentClass, branchId }));\r\n  }, [currentClass, dispatch]);\r\n\r\n  // Функции рендеринга\r\n  const renderBranchLevelIndicators = useCallback((level: number) => {\r\n    return Array.from({ length: TALENTS_BRANCH_MAX_POINTS }).map((_, i) => {\r\n      const isActive = i < level;\r\n      const isBig = (i + 1) % 5 === 0;\r\n      const type = isBig ? 'Big' : 'Small';\r\n      const state = isActive ? 'Active' : '';\r\n      \r\n      return (\r\n        <img \r\n          key={`${type}-${state}-${i}`}\r\n          className={`level-indicator__item_${type}`}\r\n          alt=\"\"\r\n          src={assets.calculator.talents.interface.talents[`_talentPoint${type}${state}`]}\r\n          loading=\"lazy\"\r\n        />\r\n      );\r\n    });\r\n  }, []);\r\n\r\n  const renderSkills = useCallback((skillsData: ISkillsData, branchId: BranchId) => {\r\n    return Object.entries(skillsData).map(([id, skillData]) => {\r\n      const skillId = id as SkillId;\r\n      const skill = branchesState[branchId]?.skills[skillId];\r\n      if (!skill) return null;\r\n\r\n      const requiredLevel = (parseInt(skillId.replace('s', ''))) * 5;\r\n      const isLocked = skill.status === SkillStatus.LOCK;\r\n      const isOpen = skill.status === SkillStatus.OPEN;\r\n\r\n      return (\r\n        <div className=\"skill__item-wrapper\" key={skillId}>\r\n          <div className=\"skill__item\">\r\n            <Tooltip\r\n              content={\r\n                <div className=\"tooltip__wrapper\">\r\n                  <h4 className=\"tooltip__title\">{skillData.name}</h4>\r\n                  <p className=\"tooltip__description\">{skillData.description}</p>\r\n                  <span className={`tooltip__skill-status tooltip__skill-status_${skill.status}`}>\r\n                    <img \r\n                      src={assets.calculator.talents.interface.skillsStatus[`_${skill.status}Status`]} \r\n                      alt=\"\" \r\n                    />\r\n                    {isLocked && <span>Требуется уровень: {requiredLevel}</span>}\r\n                    {isOpen && <span>Нажмите для изучения</span>}\r\n                    {!isLocked && !isOpen && <span>Изучено</span>}\r\n                  </span>\r\n                </div>\r\n              }\r\n              position={`skillIcon${branchId}${skillId}`}\r\n            >\r\n              <div className=\"skill__button-container\">\r\n                <button \r\n                  className=\"skill__button\"\r\n                  onClick={() => isOpen && handleSkillLevelUp(branchId, skillId)}\r\n                  disabled={!isOpen}\r\n                  aria-label={`Upgrade ${skillData.name}`}\r\n                >\r\n                  <img \r\n                    className=\"skill__icon\" \r\n                    src={assets.calculator.talents.skillsIcons[currentClass][`_${branchId}${skillId}`]} \r\n                    alt=\"\" \r\n                  />\r\n                  <div className=\"button__overlay\">\r\n                    <img\r\n                      className=\"button__overlay_status\"\r\n                      src={assets.calculator.talents.interface.skillsStatus[`_${skill.status}Status`]} \r\n                      alt=\"\"\r\n                    />\r\n                    <img\r\n                      className=\"button__overlay_filter\"\r\n                      src={assets.calculator.talents.interface.skillsStatus[`_${skill.status}Filter`]} \r\n                      alt=\"\"\r\n                    />\r\n                  </div>\r\n                </button>\r\n              </div>\r\n            </Tooltip>\r\n            <span className='skill__name'>{skillData.name}</span>\r\n          </div>\r\n        </div>\r\n      );\r\n    });\r\n  }, [branchesState, currentClass, handleSkillLevelUp]);\r\n\r\n  const renderBranchCounterPoints = useCallback((branchId: BranchId) => (\r\n    <div className=\"skill__points-counter\" key={`points-${branchId}`}>\r\n      <span className=\"skill__points-current\">\r\n        {calculateBranchPoints(branchId)}\r\n      </span>\r\n    </div>\r\n  ), [calculateBranchPoints]);\r\n\r\n  return (\r\n    <div className=\"talents\">\r\n      <div className=\"talents__control-panel\">\r\n        <div className=\"talents__points\">\r\n          Осталось очков: {availablePoints}/{TALENTS_MAX_POINTS}\r\n        </div>\r\n        \r\n        <button \r\n          className=\"talents__button_reset\" \r\n          onClick={handleResetAll}\r\n          disabled={!hasSpentTalentsPoint}\r\n          aria-label=\"Reset all talents\"\r\n        >\r\n          <img \r\n            src={assets.interface.buttons[hasSpentTalentsPoint ? \"_buttonBrown\" : \"_buttonUnactive\"]} \r\n            alt=\"\" \r\n            draggable={false}\r\n          />\r\n          <span>Сбросить все</span>\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"talents__branches\">\r\n        {Object.entries(TalentsData[currentClass]).map(([id, branchData]) => {\r\n          const branchId = id as BranchId;\r\n          const branchState = branchesState[branchId];\r\n          if (!branchState) return null;\r\n\t\t\t\t\tif (!branchData) return null;\r\n\r\n          return (\r\n            <div className=\"talent-branch\" key={branchId}>\r\n              <div className=\"talent-branch__container\">\r\n                <div className=\"talent-branch__header\">\r\n                  <img \r\n                    src={assets.calculator.talents.interface.branch._headerBranch} \r\n                    alt=\"\" \r\n                    loading=\"lazy\"\r\n                  />\r\n                  <div className=\"talent-branch__header_wrapper\">\r\n                    <Tooltip \r\n                      content={\r\n                        <div className=\"tooltip__wrapper\">\r\n                          <p className=\"tooltip__title\">{branchData.name}</p>\r\n                          <p className=\"tooltip__description\">{branchData.description}</p>\r\n                        </div>\r\n                      } \r\n                      position={`branchName${branchId}`}\r\n                    >\r\n                      <span className=\"talent-branch__header-name\">{branchData.name}</span>\r\n                    </Tooltip>\r\n                  </div>\r\n                </div>\r\n\r\n                <img \r\n                  className=\"talent-branch__background\" \r\n                  ref={imageRef}\r\n                  src={assets.calculator.talents.interface.branch._background} \r\n                  alt=\"\" \r\n                  onLoad={updateScale}\r\n                  loading=\"lazy\"\r\n                />\r\n\r\n                <div className=\"talent-branch__content\">\r\n                  <div className=\"talent-branch__left-panel\">\r\n                    <div className=\"level-indicator__list\">\r\n                      {renderBranchLevelIndicators(branchState.level)}\r\n                    </div>\r\n                    <button \r\n                      className=\"level-indicator__level-up\"\r\n                      onClick={() => handleBranchLevelUp(branchId)}\r\n                      disabled={!canUpgradeBranch(branchId)}\r\n                      aria-label=\"Increase branch level\"\r\n                    >\r\n                      <img \r\n                        src={assets.calculator.talents.interface.talents[\r\n                          `_plus${canUpgradeBranch(branchId) ? 'Active' : ''}`\r\n                        ]} \r\n                        alt=\"\" \r\n                      />\r\n                    </button>\r\n                  </div>\r\n\r\n                  <div className=\"talent-branch__right-panel\">\r\n                    <div className=\"skill__list\">\r\n                      {renderSkills(branchData.skills, branchId)}\r\n                    </div>\r\n                    {renderBranchCounterPoints(branchId)}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"talent-branch__footer\">\r\n                  <button \r\n                    className=\"talents__button_reset\" \r\n                    onClick={() => handleBranchReset(branchId)}\r\n                    disabled={branchState.level <= 0}\r\n                    aria-label={`Reset ${branchData.name} branch`}\r\n                  >\r\n                    <img \r\n                      src={assets.interface.buttons[branchState.level <= 0 ? '_buttonUnactive' : '_buttonBrown']} \r\n                      alt=\"\" \r\n                    />\r\n                    <span>Сбросить</span>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nTalentsTab.displayName = 'TalentsTab';\r\nexport default TalentsTab;","import { useEffect, RefObject } from 'react';\r\n\r\ninterface UseScaleFactorOptions {\r\n  baseWidth: number;\r\n  targetRef: RefObject<HTMLElement>;\r\n  cssVarName: string;\r\n}\r\n\r\nexport const useScaleFactor = ({\r\n  baseWidth,\r\n  targetRef,\r\n  cssVarName\r\n}: UseScaleFactorOptions) => {\r\n  const updateScale = () => {\r\n    if (!targetRef.current || targetRef.current.clientWidth === 0) return;\r\n    \r\n    const newScale = targetRef.current.clientWidth / baseWidth;\r\n    document.documentElement.style.setProperty(cssVarName, newScale.toString());\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Первое обновление с задержкой\r\n    const timer = setTimeout(updateScale, 250);\r\n    \r\n    // Наблюдатель за изменениями размеров\r\n    const observer = new ResizeObserver(updateScale);\r\n    if (targetRef.current) observer.observe(targetRef.current);\r\n\r\n    return () => {\r\n      clearTimeout(timer);\r\n      observer.disconnect();\r\n    };\r\n  }, [baseWidth, targetRef, cssVarName]);\r\n\r\n  // Возвращаем функцию для ручного обновления\r\n  return { updateScale };\r\n};"],"names":["useAppDispatch","useDispatch","useAppSelector","useSelector","createAssetsProxy","basePath","Proxy","get","_","prop","currentPath","startsWith","fileName","slice","assets","TalentsData","warrior","b1","name","description","skills","s1","s2","s3","s4","b2","b3","thief","archer","priest","mage","Tooltip$1","React","memo","content","children","position","visible","setVisible","useState","childRef","useRef","tooltipRef","showTooltip","useCallback","hideTooltip","childWithProps","cloneElement","ref","onMouseEnter","onMouseLeave","onTouchStart","onTouchEnd","jsxs","className","jsxRuntimeExports","jsx","id","role","TalentsTab","dispatch","currentClass","selectCurrentClass","branchesState","availablePoints","state","talents","branches","shallowEqual","imageRef","updateScale","baseWidth","targetRef","cssVarName","current","clientWidth","newScale","document","documentElement","style","setProperty","toString","useEffect","timer","setTimeout","observer","ResizeObserver","observe","clearTimeout","disconnect","useScaleFactor","hasSpentTalentsPoint","useMemo","TALENTS_MAX_POINTS","canUpgradeBranch","branchId","_a","level","TALENTS_BRANCH_MAX_POINTS","calculateBranchPoints","branch","Object","values","reduce","sum","skill","handleResetAll","resetTalents","handleBranchLevelUp","incrementBranchLevel","handleSkillLevelUp","skillId","incrementSkillLevel","handleBranchReset","resetBranch","renderBranchLevelIndicators","Array","from","length","map","i","type","alt","src","calculator","interface","loading","renderSkills","skillsData","entries","skillData","requiredLevel","parseInt","replace","isLocked","status","SkillStatus","LOCK","isOpen","OPEN","Tooltip","skillsStatus","onClick","disabled","skillsIcons","renderBranchCounterPoints","buttons","draggable","branchData","branchState","_headerBranch","_background","onLoad","displayName"],"mappings":"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"}